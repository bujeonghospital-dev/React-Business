# р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕гр╕░р╕Ър╕Ъ Login р╕кр╕│р╕лр╕гр╕▒р╕Ъ React-Business

## ЁЯУЛ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╣Йр╣Бр╕ер╣Йр╕з

### 1. р╣Др╕Яр╕ер╣М SQL Database

- **р╣Др╕Яр╕ер╣М:** `create-user-table-postgres.sql`
- **р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф:** SQL р╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕З PostgreSQL
  - `user` - р╕Хр╕▓р╕гр╕▓р╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
  - `roles` - р╕Ър╕Чр╕Ър╕▓р╕Чр╣Бр╕ер╕░р╕кр╕┤р╕Чр╕Шр╕┤р╣М
  - `department` - р╣Бр╕Ьр╕Щр╕Бр╕Хр╣Ир╕▓р╕Зр╣Ж
  - `position` - р╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╕Зр╕▓р╕Щ
  - `parth_file` - р╣Ар╕Бр╣Зр╕Ър╕гр╕╣р╕Ыр╣Вр╕Ыр╕гр╣Др╕Яр╕ер╣М

### 2. API Login Endpoint

- **р╣Др╕Яр╕ер╣М:** `src/app/api/auth/login/route.ts`
- **р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ:** р╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕е email/password р╣Бр╕ер╕░р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▒р╕Ър╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
- **р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н:** р╣Гр╕Кр╣Й PostgreSQL р╕Ьр╣Ир╕▓р╕Щ connection pool

### 3. р╕лр╕Щр╣Йр╕▓ Login

- **р╣Др╕Яр╕ер╣М:** `src/app/login/page.tsx`
- **р╕кр╕Цр╕▓р╕Щр╕░:** р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ (р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Бр╕▒р╕Ъ API р╣Бр╕ер╣Йр╕з)

---

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е

1. р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣И PostgreSQL:

```bash
psql -U postgres
```

2. р╕кр╕гр╣Йр╕▓р╕З database р╣Гр╕лр╕бр╣И (р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡):

```sql
CREATE DATABASE react_business;
\c react_business
```

3. р╕гр╕▒р╕Щ SQL script:

```bash
psql -U postgres -d react_business -f create-user-table-postgres.sql
```

р╕лр╕гр╕╖р╕н copy SQL р╕Ир╕▓р╕Бр╣Др╕Яр╕ер╣Мр╣Бр╕ер╣Йр╕зр╕зр╕▓р╕Зр╣Гр╕Щ pgAdmin/DBeaver

---

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Environment Variables

р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `.env.local` р╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕гр╕╣р╕Ч:

```env
# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password_here
DB_NAME=react_business

# Node Environment
NODE_ENV=development
```

**р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕:** р╣Бр╕Бр╣Йр╣Др╕В `DB_PASSWORD` р╣Бр╕ер╕░р╕Др╣Ир╕▓р╕нр╕╖р╣Ир╕Щр╣Ж р╣Гр╕лр╣Йр╕Хр╕гр╕Зр╕Бр╕▒р╕Ър╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Вр╕нр╕Зр╕Др╕╕р╕У

---

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Dependencies

```bash
npm install bcryptjs @types/bcryptjs
```

---

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 4: р╕гр╕▒р╕Щ Development Server

```bash
npm run dev
```

р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╣Др╕Ыр╕Чр╕╡р╣И: `http://localhost:3000/login`

---

## ЁЯФР р╕Вр╣Йр╕нр╕бр╕╣р╕е Login р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕Фр╕кр╕нр╕Ъ

### Admin Account

- **Email:** `admin@example.com`
- **Password:** `admin123`
- **р╕кр╕┤р╕Чр╕Шр╕┤р╣М:** Super Admin

### User Account

- **Email:** `test@example.com`
- **Password:** `admin123`
- **р╕кр╕┤р╕Чр╕Шр╕┤р╣М:** Member

---

## ЁЯУЭ р╕зр╕┤р╕Шр╕╡р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕лр╕бр╣И

р╕лр╕▓р╕Бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З user р╣Гр╕лр╕бр╣Ир╕Фр╣Йр╕зр╕вр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╕Чр╕╡р╣Ир╣Ар╕Вр╣Йр╕▓р╕гр╕лр╕▒р╕кр╣Бр╕ер╣Йр╕з:

### 1. р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `hash-password.js`:

```javascript
const bcrypt = require("bcryptjs");

const password = "your_password_here";
const hash = bcrypt.hashSync(password, 10);

console.log("Password:", password);
console.log("Hash:", hash);
```

### 2. р╕гр╕▒р╕Щ:

```bash
node hash-password.js
```

### 3. р╕Щр╕│ hash р╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╣Др╕Ыр╣Гр╕кр╣Ир╣Гр╕Щр╕Др╕│р╕кр╕▒р╣Ир╕З INSERT:

```sql
INSERT INTO "user" (name, lname, username, password, email, status_rank, admin, id_role)
VALUES ('John', 'Doe', 'johndoe', 'hash_р╕Чр╕╡р╣Ир╣Др╕Фр╣Й', 'john@example.com', 'member', FALSE, 4);
```

---

## ЁЯФН р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ

### 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╕Хр╕▓р╕гр╕▓р╕Зр╕Др╕гр╕Ъ:

```sql
\dt
```

р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ: `user`, `roles`, `department`, `position`, `parth_file`

### 2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕е user:

```sql
SELECT id, name, email, username, admin FROM "user";
```

### 3. р╕Чр╕Фр╕кр╕нр╕Ъ Login:

- р╣Ар╕Ыр╕┤р╕Ф `http://localhost:3000/login`
- р╕Бр╕гр╕нр╕Б email: `admin@example.com`
- р╕Бр╕гр╕нр╕Б password: `admin123`
- р╕Бр╕Фр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ

---

## ЁЯЫая╕П Troubleshooting

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕бр╣Ир╣Др╕Фр╣Й

**р╣Бр╕Бр╣Йр╣Др╕В:**

1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ PostgreSQL р╣Ар╕Ыр╕┤р╕Фр╕нр╕вр╕╣р╣И
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ `.env.local` р╕зр╣Ир╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ database р╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╣Йр╕з

### р╕Ыр╕▒р╕Нр╕лр╕▓: Login р╣Др╕бр╣Ир╣Др╕Фр╣Й

**р╣Бр╕Бр╣Йр╣Др╕В:**

1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕гр╕▒р╕Щ SQL script р╣Бр╕ер╣Йр╕з
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕е user р╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З
3. р╕ер╕нр╕З login р╕Фр╣Йр╕зр╕в email р╕лр╕гр╕╖р╕н username

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З

**р╣Бр╕Бр╣Йр╣Др╕В:**

- Password р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Др╕╖р╕н `admin123` р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ
- р╕Цр╣Йр╕▓р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ р╕Хр╣Йр╕нр╕Зр╣Ар╕Вр╣Йр╕▓р╕гр╕лр╕▒р╕кр╕Фр╣Йр╕зр╕в bcrypt р╕Бр╣Ир╕нр╕Щ

---

## ЁЯУЪ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕З

### р╕Хр╕▓р╕гр╕▓р╕З `user`

- `id` - р╕гр╕лр╕▒р╕кр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й (Primary Key)
- `name` - р╕Кр╕╖р╣Ир╕н
- `lname` - р╕Щр╕▓р╕бр╕кр╕Бр╕╕р╕е
- `username` - Username р╕кр╕│р╕лр╕гр╕▒р╕Ъ login
- `email` - Email р╕кр╕│р╕лр╕гр╕▒р╕Ъ login
- `password` - р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ (р╣Ар╕Вр╣Йр╕▓р╕гр╕лр╕▒р╕к bcrypt)
- `status_rank` - р╕гр╕░р╕Фр╕▒р╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣М (admin, manager, member)
- `admin` - р╕кр╕Цр╕▓р╕Щр╕░ admin (true/false)
- `last_login` - р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕ер╣Ир╕▓р╕кр╕╕р╕Ф
- `token` - Token session

### р╕Др╕зр╕▓р╕бр╕кр╕▒р╕бр╕Юр╕▒р╕Щр╕Шр╣М

- `user.id_role` тЖТ `roles.id_role`
- `user.id_dep` тЖТ `department.id`
- `user.position` тЖТ `position.id`

---

## ЁЯФТ р╕Бр╕▓р╕гр╕гр╕▒р╕Бр╕йр╕▓р╕Др╕зр╕▓р╕бр╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в

1. **р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ:** р╣Ар╕Вр╣Йр╕▓р╕гр╕лр╕▒р╕кр╕Фр╣Йр╕зр╕в bcrypt (10 rounds)
2. **SQL Injection:** р╣Гр╕Кр╣Й Parameterized Queries
3. **Token:** р╕кр╕гр╣Йр╕▓р╕З token р╣Гр╕лр╕бр╣Ир╕Чр╕╕р╕Бр╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣И login
4. **Soft Delete:** р╣Гр╕Кр╣Й `delete_date` р╣Бр╕Чр╕Щр╕Бр╕▓р╕гр╕ер╕Ър╕Ир╕гр╕┤р╕З

---

## тЬЕ Checklist

- [ ] р╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е PostgreSQL
- [ ] р╕гр╕▒р╕Щ SQL script (`create-user-table-postgres.sql`)
- [ ] р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ `.env.local`
- [ ] р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З `bcryptjs`
- [ ] р╕гр╕▒р╕Щ `npm run dev`
- [ ] р╕Чр╕Фр╕кр╕нр╕Ъ login р╕Чр╕╡р╣И `/login`
- [ ] р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ redirect р╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╣Бр╕гр╕Бр╕лр╕ер╕▒р╕З login

---

## ЁЯОп Next Steps

1. р╣Ар╕Юр╕┤р╣Ир╕б middleware р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ authentication
2. р╣Ар╕Юр╕┤р╣Ир╕бр╕лр╕Щр╣Йр╕▓ register
3. р╣Ар╕Юр╕┤р╣Ир╕бр╕лр╕Щр╣Йр╕▓ forgot password
4. р╣Ар╕Юр╕┤р╣Ир╕бр╕гр╕░р╕Ър╕Ъ permissions
5. р╣Ар╕Юр╕┤р╣Ир╕б session management
6. р╣Ар╕Юр╕┤р╣Ир╕б 2FA (Two-Factor Authentication)

---

## ЁЯУЮ р╕Хр╕┤р╕Фр╕Хр╣Ир╕н

р╕лр╕▓р╕Бр╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓р╕лр╕гр╕╖р╕нр╕Вр╣Йр╕нр╕кр╕Зр╕кр╕▒р╕в р╕кр╕▓р╕бр╕▓р╕гр╕Ц:

1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ console log р╣Гр╕Щ terminal
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ browser console (F12)
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ PostgreSQL logs
